<div class="institution-edit-dialog">
  <h1 mat-dialog-title>{{ 'profile.editInstitutionProfile' | translate }}</h1>
  
  <form [formGroup]="institutionForm" (ngSubmit)="onSave()">
    <div class="form-content">
      <!-- Información Básica -->
      <div class="section">
        <h3>{{ 'profile.basicInfo' | translate }}</h3>
        
        <mat-form-field appearance="outline">
          <mat-label>{{ 'profile.institutionName' | translate }}</mat-label>
          <input matInput formControlName="name" required>
        </mat-form-field>
        
        <mat-form-field appearance="outline">
          <mat-label>{{ 'profile.contactPerson' | translate }}</mat-label>
          <input matInput formControlName="contactPerson" required>
        </mat-form-field>
        
        <mat-form-field appearance="outline">
          <mat-label>{{ 'profile.contactEmail' | translate }}</mat-label>
          <input matInput formControlName="contactEmail" type="email" required>
        </mat-form-field>
        
        <mat-form-field appearance="outline">
          <mat-label>{{ 'profile.phone' | translate }}</mat-label>
          <input matInput formControlName="phone" type="tel">
        </mat-form-field>
        
        <mat-form-field appearance="outline">
          <mat-label>{{ 'profile.website' | translate }}</mat-label>
          <input matInput formControlName="website" type="url">
        </mat-form-field>
        
        <mat-form-field appearance="outline">
          <mat-label>{{ 'profile.address' | translate }}</mat-label>
          <textarea matInput formControlName="address" rows="2"></textarea>
        </mat-form-field>
        
        <mat-form-field appearance="outline">
          <mat-label>{{ 'profile.logoUrl' | translate }}</mat-label>
          <input matInput formControlName="logoUrl" type="url">
        </mat-form-field>
        
        <mat-form-field appearance="outline">
          <mat-label>{{ 'profile.description' | translate }}</mat-label>
          <textarea matInput formControlName="description" rows="4"></textarea>
        </mat-form-field>
      </div>
      
      <!-- Idiomas Ofrecidos -->
      <div class="section">
        <div class="section-header">
          <h3>{{ 'profile.languagesOffered' | translate }}</h3>
          <button mat-raised-button color="accent" type="button" (click)="addLanguage()">
            <mat-icon>add</mat-icon>
            {{ 'profile.addLanguage' | translate }}
          </button>
        </div>
        
        <div *ngIf="languagesOfferedArray.length === 0" class="empty-state">
          <p>{{ 'profile.noLanguagesAdded' | translate }}</p>
          <button mat-raised-button color="primary" type="button" (click)="addLanguage()">
            {{ 'profile.addFirstLanguage' | translate }}
          </button>
        </div>
        
        <div formArrayName="languagesOffered" class="languages-list">
          <div *ngFor="let languageControl of languagesOfferedArray.controls; let i = index" 
               class="language-item">
            <mat-form-field appearance="outline">
              <mat-label>{{ 'profile.language' | translate }}</mat-label>
              <mat-select [formControlName]="i" required>
                <mat-option *ngFor="let language of availableLanguages" [value]="language.code">
                  {{ getLocalizedLanguageName(language) }}
                </mat-option>
              </mat-select>
            </mat-form-field>
            
            <button mat-icon-button color="warn" type="button" (click)="removeLanguage(i)">
              <mat-icon>delete</mat-icon>
            </button>
          </div>
        </div>
      </div>
    </div>
    
    <div mat-dialog-actions align="end">
      <button mat-button type="button" (click)="onCancel()">
        {{ 'common.cancel' | translate }}
      </button>
      <button mat-raised-button color="primary" type="submit" [disabled]="!institutionForm.valid">
        {{ 'common.save' | translate }}
      </button>
    </div>
  </form>
</div>
