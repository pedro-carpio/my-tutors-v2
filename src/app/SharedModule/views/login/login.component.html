<div class="login-container">
  <!-- Toolbar -->
  <app-toolbar></app-toolbar>

  <!-- Main content wrapper with Material card -->
  <mat-card class="login-main-card">
    <mat-card-content class="login-content">
      
      <!-- Left side - Firebase illustration -->
      <!-- <div class="illustration-section">
        <img src="WithFirebase.png" 
             alt="Firebase illustration" 
             class="firebase-illustration" />
      </div> -->
      
      <!-- Right side - Login form -->
      <div class="login-section">
        <!-- Logo and title -->
        <div class="brand-section">
          <!-- <img src="FriendlyChatLogo.png" 
               alt="Friendly Chat Logo" 
               class="logo" /> -->
          <h1 class="app-title">{{ i18nService.translate('layout.title') }}</h1>
        </div>
        
        <!-- Login options -->
        <div class="login-options">
          <!-- Toggle buttons -->
          <!-- <div class="login-toggle">
            <button mat-button 
                    [class.active]="!showEmailLogin"
                    (click)="showEmailLogin = false"
                    class="toggle-btn">
              <mat-icon>account_circle</mat-icon>
              Inicio rápido
            </button>
            <button mat-button 
                    [class.active]="showEmailLogin"
                    (click)="toggleLoginMethod()"
                    class="toggle-btn">
              <mat-icon>email</mat-icon>
              Correo electrónico
            </button> 
          </div>-->

          <!-- Google Sign-in (shown when not using email login) -->
          <!-- <div *ngIf="!showEmailLogin" class="google-signin-section">
            <button mat-stroked-button 
                    class="google-signin-button"
                    (click)="login()"
                    [disabled]="isLoading">
              <img src="Google.png" 
                   alt="Google logo" 
                   class="google-logo" />
              <span class="signin-text">Continuar con Google</span>
              <mat-icon class="signin-icon">arrow_forward</mat-icon>
            </button>
          </div> -->

          <!-- Email/Password login form -->
          <div class="email-login-section">
            <form [formGroup]="loginForm" (ngSubmit)="onEmailLogin()" class="login-form">
              
              <!-- Email field -->
              <mat-form-field appearance="outline" class="full-width">
                <mat-label>{{ i18nService.translate('auth.login.email') }}</mat-label>
                <input matInput 
                       type="email" 
                       formControlName="email"
                       [placeholder]="i18nService.translate('auth.login.emailPlaceholder')"
                       [class.mat-form-field-invalid]="loginForm.get('email')?.invalid && loginForm.get('email')?.touched">
                <mat-icon matSuffix>email</mat-icon>
                <mat-error *ngIf="loginForm.get('email')?.invalid && loginForm.get('email')?.touched">
                  {{ getEmailErrorMessage() }}
                </mat-error>
              </mat-form-field>

              <!-- Password field -->
              <mat-form-field appearance="outline" class="full-width">
                <mat-label>{{ i18nService.translate('auth.login.password') }}</mat-label>
                <input matInput 
                       [type]="hidePassword ? 'password' : 'text'" 
                       formControlName="password"
                       [placeholder]="i18nService.translate('auth.login.passwordPlaceholder')"
                       [class.mat-form-field-invalid]="loginForm.get('password')?.invalid && loginForm.get('password')?.touched">
                <button mat-icon-button 
                        matSuffix 
                        (click)="hidePassword = !hidePassword"
                        [attr.aria-label]="'Hide password'" 
                        [attr.aria-pressed]="hidePassword"
                        type="button">
                  <mat-icon>{{hidePassword ? 'visibility_off' : 'visibility'}}</mat-icon>
                </button>
                <mat-error *ngIf="loginForm.get('password')?.invalid && loginForm.get('password')?.touched">
                  {{ getPasswordErrorMessage() }}
                </mat-error>
              </mat-form-field>

              <!-- Login button -->
              <button mat-raised-button 
                      color="primary" 
                      type="submit"
                      class="login-submit-button"
                      [disabled]="loginForm.invalid || isLoading">
                <span>{{ i18nService.translate('auth.login.loginButton') }}</span>
              </button>

              <!-- Forgot password link -->
              <button mat-button 
                      type="button"
                      class="forgot-password-btn"
                      (click)="navigateToForgotPassword()">
                {{ i18nService.translate('auth.login.forgotPassword') }}
              </button>
            </form>


            <!-- Divider -->
            <!-- <div class="divider-section">
              <mat-divider></mat-divider>
              <span class="divider-text">o</span>
              <mat-divider></mat-divider>
            </div> -->

            <!-- Google Sign-in as alternative -->
            <!-- <button mat-stroked-button 
                    class="google-signin-button alternative"
                    (click)="login()"
                    [disabled]="isLoading">
              <img src="Google.png" 
                   alt="Google logo" 
                   class="google-logo" />
              <span class="signin-text">Continuar con Google</span>
            </button> -->
          </div>
        </div>

        <!-- Registration links -->
        <!-- <div class="registration-section">
          <p class="register-text">{{ i18nService.translate('auth.login.noAccount') }}</p>
          <div class="register-buttons">
            <button mat-stroked-button
                    color="primary" 
                    (click)="navigateToRegister('student')"
                    class="register-btn">
              <mat-icon>person</mat-icon>
              {{ i18nService.translate('auth.login.student') }}
            </button>
            <button mat-stroked-button
                    color="primary" 
                    (click)="navigateToRegister('tutor')"
                    class="register-btn">
              <mat-icon>school</mat-icon>
              {{ i18nService.translate('auth.login.tutor') }}
            </button>
            <button mat-stroked-button
                    color="primary" 
                    (click)="navigateToRegister('institution')"
                    class="register-btn">
              <mat-icon>business</mat-icon>
              {{ i18nService.translate('auth.login.institution') }}
            </button>
          </div>
        </div> -->
      </div>
      
      <a class="lost-link" 
         [routerLink]="['/']">
        {{ i18nService.translate('layout.lost') }}
      </a>
      
      <!-- Debug buttons (remove in production) -->
      <div class="debug-section" style="margin-top: 20px; padding: 10px; border: 1px dashed #ccc; border-radius: 4px;">
        <h4>Debug Tools</h4>
        <div style="display: flex; gap: 10px; flex-wrap: wrap;">
          <button mat-stroked-button 
                  color="warn" 
                  (click)="debugListAllUsers()"
                  style="font-size: 12px;">
            List All Users
          </button>
          <button mat-stroked-button 
                  color="warn" 
                  (click)="debugTestEmailQuery()"
                  style="font-size: 12px;">
            Test Email Query
          </button>
          <button mat-stroked-button 
                  color="warn" 
                  (click)="debugSearchUsers('gmail')"
                  style="font-size: 12px;">
            Search Gmail Users
          </button>
        </div>
      </div>
    </mat-card-content>
  </mat-card>
</div>
