<mat-toolbar color="primary">
  <button 
    *ngIf="showMenuButton"
    mat-icon-button 
    (click)="onMenuToggle()"
    [attr.aria-label]="'layout.menu' | translate"
    [matTooltip]="'layout.menu' | translate">
    <mat-icon>menu</mat-icon>
  </button>
  <span class="app-title">{{ title || ('layout.appName' | translate) }}</span>
  
  <!-- Selector de roles si el usuario tiene mÃºltiples roles -->
  <div class="role-selector" *ngIf="showRoleSelector && hasMultipleRoles">
    <mat-select 
      [value]="activeRole" 
      (selectionChange)="switchRole($event.value)"
      [placeholder]="'common.switchRole' | translate"
      [matTooltip]="'common.currentRole' | translate"
      class="role-select">
      <mat-option *ngFor="let role of currentUserRoles" [value]="role">
        {{ ('roles.' + role) | translate }}
      </mat-option>
    </mat-select>
  </div>

  <span class="spacer"></span>
  <div class="toolbar-actions">
    <button 
      mat-button 
      [attr.aria-label]="'layout.changeLanguage' | translate" 
      (click)="changeLanguage()"
      [matTooltip]="'layout.changeLanguage' | translate"
      class="language-button">
      <mat-icon>language</mat-icon>
      <span class="language-indicator">{{ currentLanguage.toUpperCase() }}</span>
    </button>
    <!-- <button 
      matIconButton 
      [attr.aria-label]="'layout.setTimezone' | translate"
      [matTooltip]="'layout.setTimezone' | translate">
      <mat-icon>schedule</mat-icon>
    </button> -->
    <button 
      *ngIf="showLogout"
      mat-icon-button 
      (click)="onLogout()"
      [attr.aria-label]="'layout.logout' | translate"
      [matTooltip]="'layout.logout' | translate"
      class="logout-button">
      <mat-icon>logout</mat-icon>
    </button>
  </div>
</mat-toolbar>
